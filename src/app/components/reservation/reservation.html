<div class="container py-5 fade-in">
    <h2 class="text-center mb-5 fw-bold display-5 text-gradient">
        Mes RÃ©servations
    </h2>

    <!-- Chargement -->
    <div *ngIf="loading" class="text-center my-5">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem" role="status"></div>
        <p class="mt-3 text-muted">Chargement de vos rÃ©servations...</p>
    </div>    

    <!-- Aucune rÃ©servation -->
    <div *ngIf="!loading && reservations.length === 0" class="alert alert-info text-center">        
        Aucune rÃ©servation                    
    </div>    

    <!-- Liste des rÃ©servations -->
    <div *ngIf="!loading && reservations.length > 0" class="fade-in">
        <div class="d-flex justify-content-end mb-4">
            <button class="btn btn-outline-primary btn-glass" (click)="retourPanier()">
                â¬…ï¸ Retour au panier
            </button>
        </div>

        <div class="row g-4">
            <div *ngFor="let res of reservations" class="col-12 col-md-6 col-lg-4">
                <div class="card reservation-card border-0 rounded-4 overflow-hidden shadow-lg h-100">
                    <!-- En-tÃªte -->
                    <div class="card-header py-4 text-white" [ngClass]="{
              'bg-gradient-success': res.statut === 'PayÃ©e',
              'bg-gradient-primary': res.statut !== 'PayÃ©e'
            }">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="fw-bold mb-1">{{ res.offre.nomOffre }}</h5>
                                <small class="text-light">ğŸ“… {{ res.dateReservation | date:'dd/MM/yyyy' }}</small>
                            </div>
                            <span class="badge bg-light text-dark px-3 py-2 rounded-pill">
                                {{ res.statut }}
                            </span>
                        </div>
                    </div>

                    <!-- Corps -->
                    <div class="card-body text-dark">
                        <p class="mb-2">
                            ğŸ‘¤ <strong>{{ utilisateur?.prenom }} {{ utilisateur?.nom }}</strong>
                        </p>
                        <p class="text-muted small mb-0">
                            Identifiant rÃ©servation : <strong>#{{ res.idReservation }}</strong>
                        </p>
                    </div>

                    <!-- Pied -->
                    <div class="card-footer text-center bg-transparent border-0 pb-4">
                        <button *ngIf="res.statut !== 'PayÃ©e'"
                            class="btn btn-primary w-75 rounded-pill shadow-sm pay-btn"
                            (click)="payerReservation(res.idReservation)">
                            ğŸ’³ Payer maintenant
                        </button>

                        <div *ngIf="res.statut === 'PayÃ©e'" class="text-success fw-bold mt-2">
                            âœ… DÃ©jÃ  payÃ©e
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>